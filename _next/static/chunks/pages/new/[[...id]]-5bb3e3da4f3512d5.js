(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{7292:(e,r,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/new/[[...id]]",function(){return o(5735)}])},5735:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>l});var n=o(4848),s=o(6715),t=o(6540),a=o(9028);function l(){let e=(0,s.useRouter)(),r=(0,t.useMemo)(()=>new a.A,[]),[o,l]=(0,t.useState)({name:"",recipePicture:"",ingredients:"",howToPrepare:""});return(0,t.useEffect)(()=>{if(void 0==e.query.id)return;console.log("id received: ".concat(e.query.id));let o=Number(e.query.id);o&&r.getById(o).then(e=>{console.log(e),void 0!=e&&l(e)})},[e.query.id,r]),(0,n.jsxs)("div",{className:"d-flex flex-column text-center",children:[(0,n.jsx)("p",{className:"h1",children:"Nova Receita"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),void 0!==o&&""!=o.name&&""!=o.ingredients&&""!=o.howToPrepare&&r.create(o)},className:"form",children:[(0,n.jsxs)("div",{className:"form-input mb-3",children:[(0,n.jsx)("label",{htmlFor:"recipe-name",className:"form-label",children:"Nome da Receita"}),(0,n.jsx)("input",{required:!0,type:"text",id:"recipe-name",className:"form-control",value:o.name,onChange:e=>{l({id:o.id,name:e.target.value,recipePicture:o.recipePicture,ingredients:o.ingredients,howToPrepare:o.howToPrepare})}})]}),(0,n.jsxs)("div",{className:"form-input mb-3",children:[(0,n.jsx)("label",{htmlFor:"recipe-image",className:"form-label",children:"Foto da Receita (em breve)"}),(0,n.jsx)("input",{required:!0,type:"file",accept:".png .jpeg .jpg",id:"recipe-image",disabled:!0,className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-input mb-3",children:[(0,n.jsx)("label",{htmlFor:"ingredients",className:"form-label",children:"Ingredientes"}),(0,n.jsx)("textarea",{required:!0,id:"ingredients",className:"form-control",value:o.ingredients,onChange:e=>{l({id:o.id,name:o.name,recipePicture:o.recipePicture,ingredients:e.target.value,howToPrepare:o.howToPrepare})}})]}),(0,n.jsxs)("div",{className:"form-input mb-3",children:[(0,n.jsx)("label",{htmlFor:"how-to-prepare",className:"form-label",children:"Modo de Preparo"}),(0,n.jsx)("textarea",{required:!0,id:"how-to-prepare",className:"form-control",value:o.howToPrepare,onChange:e=>{l({id:o.id,name:o.name,recipePicture:o.recipePicture,ingredients:o.ingredients,howToPrepare:e.target.value})}})]}),(0,n.jsxs)("div",{className:"btn-group",children:[(0,n.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Salvar"}),(0,n.jsx)("button",{className:"btn btn-secondary",type:"reset",children:"Limpar"})]})]})]})}},9028:(e,r,o)=>{"use strict";let n;o.d(r,{A:()=>c});let s="recipesDatabase",t="recipes";function a(e){e.onupgradeneeded=()=>{n=e.result,console.log("openDatabase:onupgradeneeded"),n.objectStoreNames.contains(t)||n.createObjectStore(t,{autoIncrement:!0})},e.onerror=()=>{console.error("Database Error",e.error)},e.onblocked=()=>{alert("Banco de dados bloqueado")}}function l(){n.onversionchange=()=>{console.log("openDatabase:onversionchange"),null!=n&&(n.close(),alert("Banco de dados desatualizado. Atualize a p\xe1gina."))}}class c{getAll(){let e=indexedDB.open(s,1);return a(e),console.log("get all called"),new Promise((r,o)=>{e.onsuccess=()=>{n=e.result,console.log("success openning database"),l();let s=n.transaction(t),a=s.objectStore(t).getAll();console.log("getAll request: ".concat(a)),a.onerror=()=>o(a.error),a.onsuccess=()=>{let e=a.result,o=1;e.map(e=>e.id=o++),r(e)},s.oncomplete=()=>{console.log("getAll result: ".concat(a.result)),n.close()}}})}getById(e){console.log("getById called");let r=indexedDB.open(s,1);return a(r),new Promise((o,s)=>{r.onsuccess=()=>{n=r.result,console.log("success openning database"),l();let a=n.transaction(t),c=a.objectStore(t).get(e);console.log("getAll request: ".concat(c)),c.onerror=()=>s(c.error),c.onsuccess=()=>{let r=c.result;r.id=e,o(r)},a.oncomplete=()=>{console.log("getAll result: ".concat(c.result)),n.close()}}})}create(e){let r=indexedDB.open(s,1);a(r),r.onsuccess=()=>{n=r.result,l();let o=n.transaction(t,"readwrite"),s=o.objectStore(t);console.log("recipe to be saved: ".concat(e));let a=s.put(e);a.onsuccess=()=>console.log("adicionado com sucesso",a.result),a.onerror=()=>console.log("erro ao adicionar",a.error),o.oncomplete=()=>n.close()}}}},6715:(e,r,o)=>{e.exports=o(4009)}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(7292)),_N_E=e.O()}]);