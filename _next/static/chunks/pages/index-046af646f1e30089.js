(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,o,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3546)}])},141:(e,o,t)=>{"use strict";t.d(o,{A:()=>n});class n{static ParseFromRecipe(e){return e.map(e=>new n(e.name,e.ingredients,e.howToPrepare))}constructor(e,o,t){this.title="",this.ingredients="",this.instructions="",this.id=0,this.title=e,this.ingredients=o,this.instructions=t}}},3546:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>u});var n=t(4848),s=t(9965),r=t.n(s),l=t(6715);let c={src:"/_next/static/media/receitas_da_ximi.5682ee8a.webp",height:1536,width:1024,blurDataURL:"data:image/webp;base64,UklGRqIAAABXRUJQVlA4WAoAAAAQAAAABAAABwAAQUxQSCkAAAAAAAQwAAAA5/+jAEbm/+lI0v///9WT////lw32//gNBYTKYwAAAAAAAABWUDggUgAAABACAJ0BKgUACAACQDglqAJ0WQBuf4G10AAA4noO7dtN5Qq7GY/whl59tqKBizNK3GnmQCTFc9Nu95TI8G98vaX+aH9rKe7l/KBfNl3MbtAAAAA=",blurWidth:5,blurHeight:8};var a=t(6540),i=t(141),d=t(9028);function u(){let e=(0,l.useRouter)(),o=(0,a.useMemo)(()=>new d.A,[]),t=async()=>{let e=await o.getAll(),t=new Blob([JSON.stringify(i.A.ParseFromRecipe(e),null)],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download="receitas.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)};return(0,n.jsxs)("div",{className:"d-flex flex-column indexPage mx-auto row-gap-2",children:[(0,n.jsx)(r(),{src:c,className:"mx-auto",alt:"Logo",width:260,height:360}),(0,n.jsx)("button",{className:"btn btn-info indexButton mx-auto",onClick:()=>e.push("/recipes"),children:"Lista de Receitas"}),(0,n.jsx)("button",{className:"btn btn-info indexButton mx-auto",onClick:()=>e.push("/new"),children:"Nova Receita"}),(0,n.jsx)("button",{className:"btn btn-info indexButton mx-auto",onClick:()=>e.push("/import"),children:"Importar receitas"}),(0,n.jsx)("button",{className:"btn btn-info indexButton mx-auto",onClick:t,children:"Exportar todas as receitas"})]})}},9028:(e,o,t)=>{"use strict";let n;t.d(o,{A:()=>a});let s="recipesDatabase",r="recipes";function l(e){e.onupgradeneeded=()=>{n=e.result,console.log("openDatabase:onupgradeneeded"),n.objectStoreNames.contains(r)||n.createObjectStore(r,{keyPath:"id",autoIncrement:!0})},e.onerror=()=>{console.error("Database Error",e.error)},e.onblocked=()=>{alert("Banco de dados bloqueado")}}function c(){n.onversionchange=()=>{console.log("openDatabase:onversionchange"),null!=n&&(n.close(),alert("Banco de dados desatualizado. Atualize a p\xe1gina."))}}class a{getAll(){let e=indexedDB.open(s,1);return l(e),console.log("get all called"),new Promise((o,t)=>{e.onsuccess=()=>{n=e.result,console.log("success openning database"),c();let s=n.transaction(r),l=s.objectStore(r).getAll();console.log("getAll request: ".concat(l)),l.onerror=()=>t(l.error),l.onsuccess=()=>{o(l.result)},s.oncomplete=()=>{console.log("getAll result: ".concat(l.result)),n.close()}}})}getById(e){console.log("getById called");let o=indexedDB.open(s,1);return l(o),new Promise((t,s)=>{o.onsuccess=()=>{n=o.result,console.log("success openning database"),c();let l=n.transaction(r),a=l.objectStore(r).get(e);console.log("getAll request: ".concat(a)),a.onerror=()=>s(a.error),a.onsuccess=()=>{t(a.result)},l.oncomplete=()=>{console.log("getAll result: ".concat(a.result)),n.close()}}})}create(e){let o=indexedDB.open(s,1);l(o),o.onsuccess=()=>{n=o.result,c();let t=n.transaction(r,"readwrite"),s=t.objectStore(r);console.log("recipe to be saved: ".concat(e)),void 0==e.id&&delete e.id;let l=s.put(e);l.onsuccess=()=>console.log("adicionado com sucesso",l.result),l.onerror=()=>console.log("erro ao adicionar",l.error),t.oncomplete=()=>n.close()}}async bulkCreate(e){let o=indexedDB.open(s,1);return l(o),new Promise((t,s)=>{o.onsuccess=()=>{n=o.result,c();let l=n.transaction(r,"readwrite"),a=l.objectStore(r);for(let o of(console.log("recipes to be saved: ".concat(e)),e)){let e=a.put(o);e.onsuccess=()=>t(!0),e.onerror=()=>s(e.error)}l.oncomplete=()=>n.close()}})}delete(e){let o=indexedDB.open(s,1);l(o),o.onsuccess=()=>{n=o.result,c();let t=n.transaction(r,"readwrite"),s=t.objectStore(r);console.log("recipe id to be deleted: ".concat(e));let l=s.delete(e);l.onsuccess=()=>console.log("deletado com sucesso",l.result),l.onerror=()=>console.log("erro ao deletar",l.error),t.oncomplete=()=>n.close()}}}}},e=>{var o=o=>e(e.s=o);e.O(0,[615,636,593,792],()=>o(2022)),_N_E=e.O()}]);